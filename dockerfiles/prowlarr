FROM debian:bookworm-slim

ARG user=prowlarr
ARG group=media
ARG uid=1003
ARG gid=50000
ARG shell=/bin/bash

RUN apt-get update && apt-get install sqlite3 libicu72 wget -y

RUN groupadd ${group} -g ${gid} && useradd -m ${user} -u ${uid} -g ${group} -s ${shell}

USER ${user}

WORKDIR /home/${user}

RUN wget -q --content-disposition 'http://prowlarr.servarr.com/v1/update/master/updatefile?os=linux&runtime=netcore&arch=x64' && tar -xzf Prowlarr*.linux*.tar.gz --strip-components=1

ENTRYPOINT ["./Prowlarr"]

CMD ["-nobrowser","-data=/var/lib/prowlarr/"]
